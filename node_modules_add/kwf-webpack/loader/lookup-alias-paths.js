'use strict';
const fs = require('fs');
const glob = require("glob");
const ini = require('ini');
const path = require('path');

module.exports = function() {
    let ret = {
        web: '.',
        webComponents: 'components',
        webThemes: 'themes',
        tinymce: 'vendor/bower_components/tinymce/js/tinymce/classes',
        kwf: 'vendor/koala-framework/koala-framework',
    };

    glob.sync('vendor/*/*/dependencies.ini').forEach(i => {
        let dependencies = fs.readFileSync(i, 'utf-8');
        dependencies = ini.parse(dependencies);
        if (dependencies.config && dependencies.config.pathType) {
            ret[dependencies.config.pathType] = i.substr(0, i.length-17);
        }
    });


    for (let i in ret) {
        ret[i] = path.resolve(process.cwd(), ret[i]);
    }

    ret.jQuery = 'jquery';

    return ret;
};
