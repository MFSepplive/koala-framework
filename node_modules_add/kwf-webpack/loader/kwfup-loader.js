var loaderUtils = require("loader-utils");

module.exports = function(source, map) {
    var query = loaderUtils.parseQuery(this.query);

    if (!query.uniquePrefix) {
        this.emitError("Missing loader parameter uniquePrefix");
        return;
    }

    this.cacheable();

    var r = query.uniquePrefix;
    if (r) r += '-';

    source = source.replace(/kwfUp-/g, r);

    return source;
};
