var gettextParser = require("gettext-parser");
var fs = require('fs');

module.exports = function(filenames, languages)
{
    var translations = {};
    filenames.forEach(filename => {
        languages.forEach(lang => {
            const f = filename.replace('[language]', lang);
            if (fs.existsSync(f)) {
                var po = gettextParser.po.parse(fs.readFileSync(f, 'utf-8'));
                translations[lang] = po.translations;
            }
        });
    })
    return translations;
}
