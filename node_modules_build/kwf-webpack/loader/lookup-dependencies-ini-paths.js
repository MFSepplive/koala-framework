'use strict';
const path = require("path");
const glob = require("glob");
const ini = require('ini');
const fs = require('fs');

let cache;

module.exports = function()
{
    if (cache) return cache;
    let ret = [
        "./dependencies.ini"
    ];
    glob.sync('vendor/*/*/dependencies.ini').forEach(i => {
        let dependencies = fs.readFileSync(i, 'utf-8');
        dependencies = ini.parse(dependencies);
        if (dependencies.dependencies) {
            ret.push(i);
        }
    });
    ret = ret.map(i => path.resolve(process.cwd(), i));
    cache = ret;
    return ret;
};
